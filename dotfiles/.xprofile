#!/bin/sh

## Internet Browsers that needs X
for i in firefox chromium; do
	command -v $i >/dev/null 2>&1 && \
		BROWSER=$i && \
		export BROWSER && \
		break
done

## X resources
if test -f "$HOME/.Xresources" && command -v xrdb >/dev/null; then
	xrdb -merge "$HOME/.Xresources"
fi

## Disable Touchpad if exists
if command -v xinput >/dev/null; then
	for i in $(xinput list |
			sed -nE 's/^.*Touch[Pp]ad[[:space:]]+id=([[:digit:]]+).*$/\1/p'); do
		xinput disable "$i"
	done
fi

## X bindkeys
if command -v xbindkeys >/dev/null 2>&1; then
	if test -f "$HOME/.xbindkeysrc" ; then
		xbindkeys
	fi
fi

_JAVA_AWT_WM_NONREPARENTING=1
export _JAVA_AWT_WM_NONREPARENTING

# command -v urxvtd >/dev/null 2>&1 && urxvtd -q -o -f

xmodmap - <<EOF
remove Lock = Caps_Lock
remove Control = Control_L
keysym Control_L = Caps_Lock
keysym Caps_Lock = Control_L
add Lock = Caps_Lock
add Control = Control_L
remove mod4 = Hyper_L
EOF

## Turn off the bell
command -v xset >/dev/null && xset -b s 180 120

## Lock on sleep
command -v xss-lock >/dev/null && command -v slock >/dev/null && xss-lock -- slock &

## Hook, should the last one to be sourced
test -f ~/.xprofile_hook && . ~/.xprofile_hook
